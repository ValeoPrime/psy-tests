(this["webpackJsonppsy-tests"]=this["webpackJsonppsy-tests"]||[]).push([[0],{23:function(e,t,n){e.exports={FinishedQuestionnaire:"FinishedQuestionnaire__FinishedQuestionnaire___1RBap",bigInt:"FinishedQuestionnaire__bigInt___2JLRi",bigInt__success:"FinishedQuestionnaire__bigInt__success___Bu_gE",bigInt__error:"FinishedQuestionnaire__bigInt__error___2rtIa"}},25:function(e,t,n){e.exports={Drawer:"Drawer__Drawer___2Nzcl",close:"Drawer__close___3eUiV",active:"Drawer__active___WxScd"}},26:function(e,t,n){e.exports={ActiveQuestionnaire:"ActiveQuestionnaire__ActiveQuestionnaire___DWwUW",Question:"ActiveQuestionnaire__Question___BgvDm",small:"ActiveQuestionnaire__small___1uPtt"}},28:function(e,t,n){e.exports={MenuToggle:"MenuToggle__MenuToggle___1mqO0",open:"MenuToggle__open___1kMjG"}},32:function(e,t,n){e.exports={MainQuiz:"MainQuiz__MainQuiz___2xG3-",MainQuizWrapper:"MainQuiz__MainQuizWrapper___Jyt6o"}},33:function(e,t,n){e.exports={AnswerItem:"AnswerItem__AnswerItem___1ykmf",success:"AnswerItem__success___2fUsY",error:"AnswerItem__error___26eF_"}},34:function(e,t,n){e.exports={button:"button__button___3IxNo",error:"button__error___14BS3",success:"button__success___aycff",primary:"button__primary___dNO26",entry:"button__entry___1OMwH",delete:"button__delete___11FMU"}},35:function(e,t,n){e.exports={GuestScreen:"GuestScreen__GuestScreen___vT31O",Div:"GuestScreen__Div___1yz2g"}},36:function(e,t,n){e.exports={ListItem:"ListItem__ListItem___2hey1",image:"ListItem__image___1hyAt",all:"ListItem__all___2kItJ"}},37:function(e,t,n){e.exports={Auth:"Auth__Auth___2YUr1",AuthForm:"Auth__AuthForm___2Xb4F"}},38:function(e,t,n){e.exports={Input:"Input__Input___s67N0",invalid:"Input__invalid___flTJ3"}},39:function(e,t,n){e.exports={QuizCreator:"QuizCreator__QuizCreator___1FpN9",details:"QuizCreator__details___3GXdc"}},40:function(e,t,n){e.exports={QuestionareTitle:"QuestionareTitle__QuestionareTitle___UCwso",imgLabel:"QuestionareTitle__imgLabel___3LEhD",error:"QuestionareTitle__error___2fW6j"}},52:function(e,t,n){e.exports={Layout:"Layout__Layout___2C2_c"}},53:function(e,t,n){e.exports={Backdrop:"BackDrop__Backdrop___3xmex"}},56:function(e,t,n){e.exports={AnswersList:"AnswersList__AnswersList___1WbU-"}},57:function(e,t,n){e.exports={lds:"Loader__lds___3ZToI","lds-dual-ring":"Loader__lds-dual-ring___i0nZL"}},58:function(e,t,n){e.exports={itemsList:"itemsList__itemsList___1WI4F"}},59:function(e,t,n){e.exports=n.p+"static/media/biology-min.8e9a8607.jpg"},60:function(e,t,n){e.exports=n.p+"static/media/geography-min.7fb6283a.jpg"},61:function(e,t,n){e.exports=n.p+"static/media/chemistry-min.cd9be381.png"},62:function(e,t,n){e.exports=n.p+"static/media/ozer-min.54ef2ae2.jpeg"},63:function(e,t,n){e.exports={Select:"Select__Select___1rPbL"}},66:function(e,t,n){e.exports=n(97)},71:function(e,t,n){},96:function(e,t,n){e.exports={App:"App__App___1o-Fp"}},97:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),s=n.n(i),o=(n(71),n(5)),l=n(6),u=n(9),c=n(8),p=n(3),m=n(52),d=n.n(m),f=n(28),h=n.n(f),_=function(e){var t=[h.a.MenuToggle,"fa"];return e.isOpen?(t.push("fa-times"),t.push(h.a.open)):t.push("fa-bars"),r.a.createElement("i",{className:t.join(" "),onClick:e.onToggle})},v=n(25),E=n.n(v),g=n(16),b=n(53),T=n.n(b),y=function(e){return r.a.createElement("div",{className:T.a.Backdrop,onClick:e.onClick})},O=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"renderLinks",value:function(e){var t=this;return e.map((function(e,n){return r.a.createElement("li",{key:n},r.a.createElement(g.b,{to:e.to,exact:e.exact,activeClassName:E.a.active,onClick:t.props.onClose},e.label))}))}},{key:"render",value:function(){var e=[E.a.Drawer];this.props.isOpen||e.push(E.a.close);var t=[{to:"/",label:"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0435\u0441\u0442\u043e\u0432",exact:!0}];return this.props.isAuthenticated?(t.push({to:"/create-quize",label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442",exact:!1}),t.push({to:"/logout",label:"\u0412\u044b\u0439\u0442\u0438",exact:!1})):t.push({to:"/auth",label:"\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f",exact:!1}),r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:e.join(" ")},r.a.createElement("ul",null,this.renderLinks(t))),this.props.isOpen?r.a.createElement(y,{onClick:this.props.onClose}):null)}}]),t}(a.Component),I=n(7),w=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={menu:!1},n.ToogleMenu=function(){n.setState({menu:!n.state.menu})},n.menuClose=function(){n.setState({menu:!1})},n.styles={color:{"background-color":"red"}},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:d.a.Layout},r.a.createElement(O,{isOpen:this.state.menu,onClose:this.menuClose,isAuthenticated:this.props.isAuthenticated}),r.a.createElement(_,{onToggle:this.ToogleMenu,isOpen:this.state.menu}),r.a.createElement("main",null,this.props.children))}}]),t}(a.Component);var S=Object(I.b)((function(e){return{isAuthenticated:!!e.auth.token}}))(w),j=n(2),Q=n(32),C=n.n(Q),k=n(26),q=n.n(k),A=n(56),N=n.n(A),x=n(33),L=n.n(x),R=function(e){var t=[L.a.AnswerItem];return e.answerState&&t.push(L.a[e.answerState]),r.a.createElement("li",{className:t.join(" "),onClick:function(){return e.answerClick(e.answer.id)}},e.answer.text)},F=function(e){return r.a.createElement("ul",{className:N.a.AnswersList},e.answers.map((function(t,n){return r.a.createElement(R,{key:n,answer:t,answerClick:e.answerClick,answerState:e.answerState?e.answerState[t.id]:null})})))},D=function(e){return r.a.createElement("div",{className:q.a.ActiveQuestionnaire},r.a.createElement("p",{className:q.a.Question},r.a.createElement("span",null,r.a.createElement("strong",null,e.QuestionNum,".")," \xa0",e.textQuestion),r.a.createElement("small",{className:q.a.small},e.QuestionNum," \u0438\u0437 ",e.totalNumQuestions)),r.a.createElement(F,{answers:e.answers,answerClick:e.answerClick,answerState:e.answerState}))},z=n(23),H=n.n(z),M=n(34),U=n.n(M),V=function(e){var t=[U.a.button,U.a[e.type]];return(r.a.createElement("button",{className:t.join(" "),disabled:e.disabled||!1,onClick:e.onClick},e.children))},G=function(e){var t=Object.keys(e.results).reduce((function(t,n){return"success"===e.results[n]&&t++,t}),0);return(r.a.createElement("div",{className:H.a.FinishedQuestionnaire},r.a.createElement("div",{className:H.a.bigInt},r.a.createElement("div",{className:H.a.bigInt__success}," \u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e ",r.a.createElement("br",null)," ",r.a.createElement("span",null,t)),r.a.createElement("div",{className:H.a.bigInt__error}," \u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e ",r.a.createElement("br",null)," ",r.a.createElement("span",null,e.questions.length-t))),r.a.createElement("ul",null,e.questions.map((function(t,n){var a=["fa","error"===e.results[t.id]?"fa-times":"fa-check"];return(r.a.createElement("li",{key:n},r.a.createElement("strong",null,n+1,"."),"\xa0",t.question,r.a.createElement("i",{className:a.join(" ")})))}))),r.a.createElement("p",null,"\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e ",t," \u0438\u0437 ",e.questions.length),r.a.createElement("div",null,r.a.createElement(V,{type:"primary",onClick:e.onRetry}," ","\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c"),r.a.createElement(V,{type:"success",onClick:e.onRepeat}," ","\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u0442\u0435\u0441\u0442\u043e\u0432"))))},W=n(57),B=n.n(W),P=function(){return r.a.createElement("div",{className:B.a.lds})},J=n(22),X=n(10),Z=n.n(X),Y=n(15),$=n(18),K=n.n($);function ee(e){return{type:"FETCH_QUESTIONARE_TITLES",allQuestionnaireTitles:e}}function te(e,t){return{type:"ANSWER",answerState:e,results:t}}function ne(e){return e.activeQuestion+1===e.questions.length}function ae(){return{type:"IS_QUESTIONNAIRE_FINISHED"}}function re(e){return{type:"NEXT_QUESTION",number:e}}function ie(e,t){return{type:"FETCH_ACTIVE_QUESTIONARE_TITLE_AND_QUESTIONS",questionnaireTitle:e,questions:t}}var se=function(e){Object(u.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(p.a)(e);if(t()){var r=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).backToList=function(){console.log("\u041f\u0440\u043e\u043f\u0435\u0440\u0442\u0438",e.props),e.props.repeatHandler()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchActiveTest(this.props.testId||this.props.location.pathname.split("/")[2])}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:C.a.MainQuiz},r.a.createElement("div",{className:C.a.MainQuizWrapper},r.a.createElement("h1",null,'"'.concat(this.props.questionnaireTitle,'"')),this.props.questionsLoad?this.props.isFinished?r.a.createElement(G,{results:this.props.results,questions:this.props.questions,onRetry:this.props.retryHandler,onRepeat:this.backToList}):r.a.createElement(D,{key:this.props.questions[this.props.activeQuestion].id,answers:this.props.questions[this.props.activeQuestion].answers,textQuestion:this.props.questions[this.props.activeQuestion].question,answerClick:this.props.answerClick,totalNumQuestions:this.props.questions.length,QuestionNum:this.props.activeQuestion+1,answerState:this.props.answerState}):r.a.createElement(P,null))))}}]),n}(a.Component);var oe=Object(I.b)((function(e){return{results:e.allTests.results,testId:e.allTests.testId,isFinished:e.allTests.isFinished,questionsLoad:e.allTests.questionsLoad,activeQuestion:e.allTests.activeQuestion,answerState:e.allTests.answerState,questionnaireTitle:e.allTests.questionnaireTitle,key:e.allTests.key,questions:e.allTests.questions}}),(function(e){return{fetchActiveTest:function(t){return e(function(e){return function(){var t=Object(Y.a)(Z.a.mark((function t(n){var a,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null,r=[],t.prev=2,t.next=5,K.a.get("https://quiz-316f6.firebaseio.com/quizes/".concat(e,".json"));case 5:t.sent.data.forEach((function(e){a=e.questionareTitle,r.push(e)})),n(ie(a,r)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),n({type:"FETCH_QUESTIONARE_TITLES_ERROR",error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))},retryHandler:function(){return e({type:"RETRY_HANDLER"})},repeatHandler:function(){return e({type:"REPEAT_HANDLER"})},answerClick:function(t){return e(function(e){return function(t,n){var a=n().allTests;if(a.answerState){var r=Object.keys(a.answerState)[0];if("success"===a.answerState[r])return}var i=a.questions[a.activeQuestion],s=a.results;if(i.rightAnswerId===e){s[i.id]||(s[i.id]="success"),t(te(Object(J.a)({},e,"success"),s));var o=window.setTimeout((function(){ne(a)?t(ae()):t(re(a.activeQuestion+1)),window.clearTimeout(o)}),1e3)}else{s[i.id]="error",t(te(Object(J.a)({},e,"error"),s));var l=window.setTimeout((function(){ne(a)?t(ae()):t(re(a.activeQuestion+1)),window.clearTimeout(l)}),1e3)}}}(t))}}}))(se),le=n(35),ue=n.n(le),ce=n(58),pe=n.n(ce),me=n(36),de=n.n(me),fe=n(59),he=n.n(fe),_e=n(60),ve=n.n(_e),Ee=n(61),ge=n.n(Ee),be=n(62),Te=n.n(be),ye=function(e){var t={biology:he.a,geography:ve.a,chemistry:ge.a,ozerMin:Te.a};localStorage.getItem("token");var n="/";return localStorage.getItem("token")&&(n="/quiz/"+e.id),r.a.createElement("li",{className:de.a.ListItem},r.a.createElement(g.b,{to:n},e.title),r.a.createElement("img",{className:de.a.image,src:t[e.questionareImg]||t.ozerMin,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"}),r.a.createElement(V,{type:"delete",disabled:e.disabled||!1,onClick:function(){return e.delete(e.id)||null}},"\u0425"),r.a.createElement(V,{type:"entry",disabled:e.disabled||!1,onClick:function(){return e.startTest(e.id)||null}},"\u041d\u0430\u0447\u0430\u0442\u044c"))},Oe=function(e){return r.a.createElement("ul",{className:pe.a.itemsList},e.allTitles.map((function(t,n){return r.a.createElement(ye,{id:t[0],key:n,title:t[1],questionareImg:t[t.length-1],disabled:e.disabled||null,startTest:e.startTest||null,delete:e.delete||null})})))};var Ie=function(e){Object(u.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(p.a)(e);if(t()){var r=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).redirect=function(){e.props.history.push("/auth"),e.props.guestScreenOff()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchAllTestsTitles()}},{key:"render",value:function(){return console.log("\u041f\u0440\u043e\u043f\u0441\u044b \u0433\u043e\u0441\u0442\u044f",this.props),r.a.createElement(r.a.Fragment,null,this.props.isAuthenticated?this.props.guestScreen?r.a.createElement("div",{className:ue.a.GuestScreen},r.a.createElement("h1",null,"\u0412 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0442\u0435\u0441\u0442\u044b :"),r.a.createElement(Oe,{startTest:this.props.testID,allTitles:this.props.allQuestionnaireTitles,delete:this.props.deleteQuestionare})):r.a.createElement(oe,{TESTId:this.props.testId}):r.a.createElement("div",{className:ue.a.Div},r.a.createElement("h1",null,"\u0412 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0442\u0435\u0441\u0442\u044b :"),r.a.createElement(Oe,{allTitles:this.props.allQuestionnaireTitles,disabled:!0}),r.a.createElement("p",null,"\u043d\u043e \u0438\u0445 \u043d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043f\u043e\u043a\u0430 \u0432\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b"),r.a.createElement(V,{type:"success",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f/\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f",onClick:this.redirect})))}}]),n}(a.Component);var we=Object(I.b)((function(e){return{guestScreen:e.allTests.guestScreen,allQuestionnaireTitles:e.allTests.allQuestionnaireTitles,testId:e.allTests.testId,isAuthenticated:!!e.auth.token}}),(function(e){return{fetchAllTestsTitles:function(){return e(function(){var e=Object(Y.a)(Z.a.mark((function e(t){var n,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.get("https://quiz-316f6.firebaseio.com/quizes.json");case 3:n=e.sent,a=[],Object.keys(n.data).forEach((function(e){var t=[e,n.data[e][0].questionareTitle],r=n.data[e][0].questionareImg;t.push(r),a.push(t)})),t(ee(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"FETCH_QUESTIONARE_TITLES_ERROR",error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())},testID:function(t){return e(function(e){return{type:"FETCH_TEST_ID",testId:e}}(t))},guestScreenOff:function(){return e({type:"GUEST_SCREEN_OFF"})},deleteQuestionare:function(t){return e(function(e){return function(){var t=Object(Y.a)(Z.a.mark((function t(n,a){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K.a.delete("https://quiz-316f6.firebaseio.com/quizes/".concat(e,".json"));case 3:n({type:"DELETE_QUESTIONARE",allQuestionnaireTitles:a().allTests.allQuestionnaireTitles.filter((function(t){return t[0]!==e}))}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()}(t))}}}))(Ie),Se=n(1),je=n(37),Qe=n.n(je),Ce=n(38),ke=n.n(Ce);function qe(e){var t=e.valid,n=e.touched,a=e.shouldValidate;return!(t||!a||!n)}var Ae=function(e){var t=e.type||"text",n=[ke.a.Input],a="".concat(t," - ").concat(Math.random());return qe(e)&&n.push(ke.a.invalid),r.a.createElement("div",{className:n.join(" ")},r.a.createElement("label",{htmlFor:a},e.label),r.a.createElement("input",{type:t,id:a,value:e.value,onChange:e.onChange}),qe(e)?r.a.createElement("span",null,e.errorMessage||"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"):null)};function Ne(e){return{type:"AUTH_SUCCESS",token:e}}function xe(e){return function(t){setTimeout((function(){t(Le())}),1e3*e)}}function Le(){return localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}}var Re=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isFormValid:!1,formControls:{email:{value:"",type:"email",label:"Email",errorMessage:"\u0421\u0434\u0430\u0435\u0442\u0441\u044f \u043c\u043d\u0435 \u0442\u044b \u043f\u044b\u0442\u0430\u0435\u0448\u044c\u0441\u044f \u0441\u043a\u043e\u043b\u044c\u0437\u043e\u043d\u0443\u0442\u044c?",valid:!1,touched:!1,validations:{required:!0,email:!0}},password:{value:"",type:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",errorMessage:"\u041f\u0430\u0440\u043e\u043b\u044c \u0433\u043d\u0438\u043b\u043e\u0432\u0430\u0442",valid:!1,touched:!1,validations:{required:!0,minLength:6}}}},n.submitHandler=function(e){e.preventDefault()},n.loginHandler=function(e){n.state.isFormValid||e.preventDefault(),n.props.auth(n.state.formControls.email.value,n.state.formControls.password.value,!0)},n.registerHandler=function(){n.props.auth(n.state.formControls.email.value,n.state.formControls.password.value,!1)},n.onChangeHandler=function(e,t){var a=Object(Se.a)({},n.state.formControls),r=Object(Se.a)({},a[t]);r.value=e.target.value,r.touched=!0,r.valid=n.validateControl(r.value,r.validations),a[t]=r;var i=!0;Object.keys(a).forEach((function(e){i=a[e].valid&&i})),n.setState({formControls:a,isFormValid:i})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"renderInput",value:function(){var e=this;return Object.keys(this.state.formControls).map((function(t,n){var a=e.state.formControls[t];return r.a.createElement(Ae,{key:n,type:a.type,label:a.label,errorMessage:a.errorMessage,valid:a.valid,touched:a.touched,shouldValidate:!0,onChange:function(n){return e.onChangeHandler(n,t)}})}))}},{key:"validateControl",value:function(e,t){if(!t)return!0;var n=!0;return t.required&&(n=""!==e.trim()&&n),t.email&&(n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())&&n),t.minLength&&(n=e.length>=t.minLength&&n),n}},{key:"render",value:function(){return r.a.createElement("div",{className:Qe.a.Auth},r.a.createElement("div",null,r.a.createElement("h1",null,"\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"),r.a.createElement("form",{onSubmit:this.submitHandler,className:Qe.a.AuthForm},this.renderInput(),r.a.createElement(V,{type:"success",onClick:this.loginHandler,disabled:!this.state.isFormValid},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(V,{type:"primary",onClick:this.registerHandler,disabled:this.state.isFormValid},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement("div",null,r.a.createElement("p",null,"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),r.a.createElement("span",null,"mail@gmail.com"),"  ",r.a.createElement("span",null,"123698745"))))}}]),t}(a.Component);var Fe=Object(I.b)(null,(function(e){return{auth:function(t,n,a){return e(function(e,t,n){return function(){var a=Object(Y.a)(Z.a.mark((function a(r){var i,s,o,l;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i={email:e,password:t,returnSecureToken:!0},s="",s=n?"https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=AIzaSyALD2dHT9lF2G6-J7nv3BtJkrMcUhk8HgI":"https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=AIzaSyALD2dHT9lF2G6-J7nv3BtJkrMcUhk8HgI",a.next=5,K.a.post(s,i);case 5:o=a.sent,l=new Date((new Date).getTime()+1e3*o.data.expiresIn),localStorage.setItem("token",o.data.idToken),localStorage.setItem("userId",o.data.localId),localStorage.setItem("expirationDate",l),r(Ne(o.data.idToken)),r(xe(o.data.expiresIn));case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}}))(Re),De=n(39),ze=n.n(De),He=n(63),Me=n.n(He),Ue=function(e){var t="".concat(e.label,"-").concat(Math.random());return r.a.createElement("div",{className:Me.a.Select},r.a.createElement("label",{htmlFor:t}),r.a.createElement("select",{id:t,value:e.value,onChange:e.onChange},e.options.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value+t},e.text)}))))};function Ve(e,t){return Object(Se.a)({},e,{validation:t,valid:!t,touched:!1,value:""})}function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return!0;var n=!0;return t.required&&(n=""!==e.trim()&&n),e<=t.minLength&&(n=!1),n}function We(e){var t=!0;for(var n in e)e.hasOwnProperty(n)&&(t=e[n].valid&&t);return t}var Be=n(40),Pe=n.n(Be),Je=function(e){return r.a.createElement("form",{className:Pe.a.QuestionareTitle},r.a.createElement("label",{htmlFor:"QuestionareTitle"},"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0412\u0430\u0448\u0435\u0433\u043e \u043e\u043f\u0440\u043e\u0441\u0430"),r.a.createElement("input",{id:"QuestionareTitle",onChange:e.QuestionareTitleChange}),r.a.createElement("span",{className:Pe.a.error},e.errorMessage),r.a.createElement(Ue,{label:"\u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0442\u0435\u0441\u0442\u0430",value:e.questionareImg||"other",onChange:e.QuestionareImgHandler,options:[{text:"\u0411\u0438\u043e\u043b\u043e\u0433\u0438\u044f",value:"biology"},{text:"\u0425\u0438\u043c\u0438\u044f",value:"chemistry"},{text:"\u0413\u0435\u043e\u0433\u0440\u0430\u0444\u0438\u044f",value:"geography"},{text:"\u0414\u0440\u0443\u0433\u043e\u0435",value:"ozerMin"}]}),r.a.createElement(V,{type:"primary",onClick:e.QuestionareTitle},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"))};function Xe(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(Y.a)(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\u041e\u043f\u0440\u043e\u0441",t),e.next=3,K.a.post("https://quiz-316f6.firebaseio.com/quizes.json",t).then((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return{question:Ve({label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441",errorMessage:"\u0412\u043e\u043f\u0440\u043e\u0441 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c \u0438\u043b\u0438 \u043a\u043e\u0440\u043e\u0447\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},{required:!0,minLength:5}),option1:Ve({label:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1",errorMessage:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",id:1},{required:!0}),option2:Ve({label:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2",errorMessage:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",id:2},{required:!0}),option3:Ve({label:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3",errorMessage:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",id:3},{required:!0}),option4:Ve({label:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 4",errorMessage:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",id:4},{required:!0})}}var $e=function(e){Object(u.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(p.a)(e);if(t()){var r=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={questionareTitleSelected:!1,questionareTitle:"",isFormValid:!1,rightAnswerId:1,formControls:Ye(),questionareImg:"ozerMin"},e.submitHandler=function(e){e.preventDefault()},e.addQuestionHandler=function(t){t.preventDefault();var n={questionareTitle:e.state.questionareTitle,questionareImg:e.state.questionareImg,question:e.state.formControls.question.value,id:e.props.quiz.length+1,rightAnswerId:e.state.rightAnswerId,answers:[{text:e.state.formControls.option1.value,id:e.state.formControls.option1.id},{text:e.state.formControls.option2.value,id:e.state.formControls.option2.id},{text:e.state.formControls.option3.value,id:e.state.formControls.option3.id},{text:e.state.formControls.option4.value,id:e.state.formControls.option4.id}]};e.props.addQuestion(n),e.setState({isFormValid:!1,rightAnswerId:1,formControls:Ye()})},e.createQuizHandler=function(){var t=Object(Y.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.setState({isFormValid:!1,rightAnswerId:1,formControls:Ye(),questionareTitleSelected:!1}),Xe(e.props.quiz),console.log("\u0412\u0441\u0435 \u043e\u043f\u0440\u043e\u0441\u044b",e.props),e.props.history.push("/");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeHandler=function(t,n){var a=Object(Se.a)({},e.state.formControls),r=Object(Se.a)({},a[n]);r.touched=!0,r.value=t,r.valid=Ge(r.value,r.validation),a[n]=r,e.setState({formControls:a,isFormValid:We(a)})},e.renderInputs=function(){return Object.keys(e.state.formControls).map((function(t,n){var a=e.state.formControls[t];return(r.a.createElement(r.a.Fragment,{key:t+n},r.a.createElement(Ae,{key:n,label:a.label,value:a.value,valid:a.valid,shouldValidate:!!a.validation,touched:a.touched,errorMessage:a.errorMessage,onChange:function(n){return e.changeHandler(n.target.value,t)}}),0===n?r.a.createElement("hr",null):null))}))},e.selectChangeHandler=function(t){e.setState({rightAnswerId:+t.target.value})},e.questionareTitle=function(t){t.preventDefault(),e.state.questionareTitle.trim().length>5&&e.setState({questionareTitleSelected:!0})},e.QuestionareTitleChange=function(t){var n=t.target.value;e.setState({questionareTitle:n})},e.QuestionareImgHandler=function(t){var n=t.target.value;e.setState({questionareImg:n})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=r.a.createElement(Ue,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442",value:this.state.rightAnswerId,onChange:this.selectChangeHandler,options:[{text:1,value:1},{text:2,value:2},{text:3,value:3},{text:4,value:4}]});return(r.a.createElement("div",{className:ze.a.QuizCreator},!1===this.state.questionareTitleSelected?r.a.createElement(Je,{QuestionareTitle:this.questionareTitle,QuestionareTitleChange:this.QuestionareTitleChange,QuestionareImgHandler:this.QuestionareImgHandler,questionareImg:this.state.questionareImg,errorMessage:this.state.questionareTitle.trim().length>5?null:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c \u0438\u043b\u0438 \u043a\u043e\u0440\u043e\u0447\u0435 5 \u0441\u0438\u0432\u043e\u043b\u043e\u0432"}):r.a.createElement(r.a.Fragment,null,console.log(this.state),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("h1",null,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0435\u0441\u0442\u0430"),this.renderInputs(),e,r.a.createElement(V,{type:"primary",onClick:this.addQuestionHandler,disabled:!this.state.isFormValid},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441"))),r.a.createElement("div",null,r.a.createElement("h2",null,"\u0414\u0435\u0442\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0435\u043c\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0430"),r.a.createElement("h3",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0435\u0441\u0442\u0430 '",this.state.questionareTitle,"'"),r.a.createElement("div",null,"\u0412 \u0442\u0435\u0441\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432"," ",this.props.quiz.length>0?this.props.quiz.length:0),r.a.createElement("ul",{className:ze.a.details},this.props.quiz.map((function(e,t){return r.a.createElement("li",{key:t},t+1,". ",e.question)}))),r.a.createElement(V,{type:"success",onClick:this.createQuizHandler,disabled:0===this.props.quiz.length},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442")))))}}]),n}(a.Component);var Ke=Object(I.b)((function(e){return{allQuestionnaireTitles:e.allTests.allQuestionnaireTitles,quiz:e.createQuizi.quiz}}),(function(e){return{addQuestion:function(t){return e({type:"QUESTION",item:t})},createQuiz:function(t){return e(Xe(t))},clearQuiz:function(){return e({type:"CREATE_QUIZ"})}}}))($e),et=(n(96),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"render",value:function(){return r.a.createElement(j.a,{to:"/"})}}]),t}(a.Component));var tt=Object(I.b)(null,(function(e){return{logout:function(){return e(Le())}}}))(et);var nt=function(e){Object(u.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(p.a)(e);if(t()){var r=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.autoLogin()}},{key:"render",value:function(){var e=r.a.createElement(j.d,null,r.a.createElement(j.b,{path:"/auth",component:Fe}),r.a.createElement(j.b,{path:"/quiz/:id",component:oe}),r.a.createElement(j.b,{path:"/",exact:!0,component:we}),r.a.createElement(j.a,{to:"/"}));return this.props.isAuthenticated&&(e=r.a.createElement(j.d,null,r.a.createElement(j.b,{path:"/create-quize",component:Ke}),r.a.createElement(j.b,{path:"/quiz/:id",component:oe}),r.a.createElement(j.b,{path:"/logout",component:tt}),r.a.createElement(j.b,{path:"/",exact:!0,component:we}),r.a.createElement(j.a,{to:"/"}))),r.a.createElement("div",{className:"App"},r.a.createElement(S,null,e))}}]),n}(a.Component);var at=Object(j.g)(Object(I.b)((function(e){return{isAuthenticated:!!e.auth.token}}),(function(e){return{autoLogin:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var n=new Date(localStorage.getItem("expirationDate"));n<=new Date?e(Le()):(e(Ne(t)),e(xe(n.getTime()-(new Date).getTime()/1e3)))}else e(Le())}))}}}))(nt));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rt=n(17),it={guestScreen:!0,allQuestionnaireTitles:["\u0422\u0435\u0441\u0442\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"],results:{},testId:null,isFinished:!1,questionsLoad:!1,activeQuestion:0,answerState:[],questionnaireTitle:"",key:null,questions:[]};var st={token:""};var ot=n(65),lt={quiz:[]};var ut=Object(rt.c)({allTests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ACTIVE_QUESTIONARE_TITLE_AND_QUESTIONS":return Object(Se.a)(Object(Se.a)({},e),{},{questionsLoad:!0,questionnaireTitle:t.questionnaireTitle,questions:t.questions});case"ANSWER":return Object(Se.a)(Object(Se.a)({},e),{},{answerState:e.answerState.push(t.answerState),results:t.results});case"IS_QUESTIONNAIRE_FINISHED":return Object(Se.a)(Object(Se.a)({},e),{},{isFinished:!0,answerState:[]});case"NEXT_QUESTION":return Object(Se.a)(Object(Se.a)({},e),{},{activeQuestion:t.number,answerState:[]});case"RETRY_HANDLER":return Object(Se.a)(Object(Se.a)({},e),{},{results:{},isFinished:!1,activeQuestion:0,answerState:[]});case"REPEAT_HANDLER":return Object(Se.a)(Object(Se.a)({},e),{},{guestScreen:!0,isFinished:!1,activeQuestion:0,answerState:[]});case"GUEST_SCREEN_OFF":return Object(Se.a)(Object(Se.a)({},e),{},{guestScreen:!0,allQuestionnaireTitles:["\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 2"],results:{},testId:null,isFinished:!1,questionsLoad:!1,activeQuestion:0,answerState:[],questionnaireTitle:"",key:null,questions:[],quiz:[]});case"FETCH_QUESTIONARE_TITLES":return Object(Se.a)(Object(Se.a)({},e),{},{allQuestionnaireTitles:t.allQuestionnaireTitles,isFinished:!1,guestScreen:!0,testId:null,questionnaireTitle:"",questions:[],questionsLoad:!1});case"FETCH_TEST_ID":return Object(Se.a)(Object(Se.a)({},e),{},{testId:t.testId,guestScreen:!1});case"QUIZ_SET_STATE":return Object(Se.a)(Object(Se.a)({},e),{},{answerState:t.answerState,results:t.results});case"DELETE_QUESTIONARE":return Object(Se.a)(Object(Se.a)({},e),{},{allQuestionnaireTitles:t.allQuestionnaireTitles});case"FETCH_QUESTIONARE_TITLES_ERROR":default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_SUCCESS":return Object(Se.a)(Object(Se.a)({},e),{},{token:t.token});case"AUTH_LOGOUT":return Object(Se.a)(Object(Se.a)({},e),{},{token:null});default:return e}},createQuizi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUESTION":return Object(Se.a)(Object(Se.a)({},e),{},{quiz:[].concat(Object(ot.a)(e.quiz),[t.item])});case"CREATE_QUIZ":return Object(Se.a)(Object(Se.a)({},e),{},{quiz:[]});default:return Object(Se.a)({},e)}}}),ct=n(64),pt="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):rt.d,mt=Object(rt.e)(ut,pt(Object(rt.a)(ct.a))),dt=r.a.createElement(I.a,{store:mt},r.a.createElement(g.a,null,r.a.createElement(at,null)));s.a.render(dt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[66,1,2]]]);
//# sourceMappingURL=main.097775ce.chunk.js.map